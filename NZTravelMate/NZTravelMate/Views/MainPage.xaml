<?xml version="1.0" encoding="UTF-8"?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:behaviors="clr-namespace:NZTravelMate.Behaviours" 
             x:Class="NZTravelMate.Views.MainView"
             Title="Calculator">
    <ContentPage.Resources>
    </ContentPage.Resources>
    <Grid>
        <!--Content-->
        <StackLayout BackgroundColor="Black">
            <!--Header-->
            <StackLayout Orientation="Horizontal" VerticalOptions="Start">
                <!--Menu-->
            </StackLayout>

            <!--Body-->
            <StackLayout VerticalOptions="CenterAndExpand">
                <ScrollView>
                    <StackLayout>
                        <!--///////////////////////////////////First///////////////////////////////////-->
                        <Frame BackgroundColor="#222222" 
                               Padding="20, 0, 20, 0">
                            
                            <Grid >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <!--Currency-->
                                <Picker ClassId="first"
                                    TextColor="WhiteSmoke" 
                                    Title="Currency" 
                                    TitleColor="Black"
                                    FontSize="30"
                                    Grid.Column="0"
                                    ItemsSource="{Binding Currencies}" 
                                    ItemDisplayBinding="{Binding Code}"
                                    SelectedIndex="{Binding FirstCurrency}">
                                    <Picker.Behaviors>
                                        <behaviors:PickerChanged/>
                                    </Picker.Behaviors>
                                </Picker>
                                <!--Value-->
                                <Entry ClassId="first"
                                   Placeholder="Value"
                                   PlaceholderColor="WhiteSmoke"
                                   TextColor="WhiteSmoke"  
                                   Keyboard="Numeric" 
                                   ClearButtonVisibility="WhileEditing" 
                                   ReturnType="Next" 
                                   VerticalTextAlignment="End"
                                   FontSize="60"
                                   Grid.Column="1"
                                   HorizontalTextAlignment="End"
                                   Text="{Binding FirstAmount}">
                                    <Entry.Behaviors>
                                        <behaviors:CompletedEntry/>
                                        <behaviors:FocusedEntry/>
                                    </Entry.Behaviors>
                                </Entry>
                            </Grid>
                        </Frame>
                        <!--Output-->
                        <Frame BackgroundColor="#333333" Padding="20, 0, 20, 0">
                            <Label ClassId="first"
                               Text="{Binding FirstOutput}"
                               TextColor="WhiteSmoke"
                               VerticalTextAlignment="Center" 
                               HorizontalTextAlignment="End"
                               FontSize="30"
                               Grid.Row="1"/>
                        </Frame>

                        <!--///////////////////////////////////Second///////////////////////////////////-->
                        <Frame BackgroundColor="#222222" 
                               Padding="20, 0, 20, 0">
                            <Grid >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <!--Currency-->
                                <Picker ClassId="second"
                                    TextColor="WhiteSmoke" 
                                    Title="Currency" 
                                    TitleColor="Black"
                                    FontSize="30"
                                    Grid.Column="0"
                                    ItemsSource="{Binding Currencies}" 
                                    ItemDisplayBinding="{Binding Code}"
                                    SelectedIndex="{Binding SecondCurrency}">
                                    <Picker.Behaviors>
                                        <behaviors:PickerChanged/>
                                    </Picker.Behaviors>
                                </Picker>
                                <!--Value-->
                                <Entry ClassId="second"
                                   Placeholder="Value"
                                   PlaceholderColor="WhiteSmoke"
                                   TextColor="WhiteSmoke"  
                                   Keyboard="Numeric" 
                                   ClearButtonVisibility="WhileEditing" 
                                   ReturnType="Next" 
                                   VerticalTextAlignment="End"
                                   FontSize="60"
                                   Grid.Column="1"
                                   HorizontalTextAlignment="End"
                                   Text="{Binding SecondAmount}">
                                    <Entry.Behaviors>
                                        <behaviors:CompletedEntry/>
                                        <behaviors:FocusedEntry/>
                                    </Entry.Behaviors>
                                </Entry>
                            </Grid>
                        </Frame>
                        <!--TaxOutput-->
                        <Frame BackgroundColor="#333333"
                               Padding="20, 0, 20, 0"
                               IsVisible="{Binding TaxVisible}">
                            <Label ClassId="second"
                               Text="{Binding TaxOutput}"
                               TextColor="WhiteSmoke"
                               VerticalTextAlignment="Center" 
                               HorizontalTextAlignment="End"
                               FontSize="30"/>
                        </Frame>
                        <!--Output-->
                        <Frame BackgroundColor="#333333" Padding="20, 0, 20, 0">
                            <Label ClassId="second"
                               Text="{Binding SecondOutput}"
                               TextColor="WhiteSmoke"
                               VerticalTextAlignment="Center" 
                               HorizontalTextAlignment="End"
                               FontSize="30"/>
                        </Frame>
                    </StackLayout>
                </ScrollView>
                
                <!--TestDisplay-->
                <ListView ItemsSource="{Binding Currencies}"
                          BackgroundColor="White"
                          IsVisible="false">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ViewCell>
                                <Grid>
                                    <Label Text="{Binding Code}" FontAttributes="Bold" />
                                    <Label Grid.Column="1" Text="{Binding Name}" />
                                    <Label Grid.Column="2" Text="{Binding Rate}" HorizontalTextAlignment="End" />
                                </Grid>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackLayout>

            <!--Footer-->
            <StackLayout Orientation="Horizontal" VerticalOptions="End">
                <!--///////////////////////////////////Third///////////////////////////////////-->
                <Frame BackgroundColor="#222222"
                               Padding="20, 0, 20, 0">
                    <Grid >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!--Value-->
                        <Entry ClassId="second"
                                   Placeholder="Sales Tax"
                                   PlaceholderColor="WhiteSmoke"
                                   TextColor="WhiteSmoke"  
                                   Keyboard="Numeric" 
                                   ClearButtonVisibility="WhileEditing" 
                                   ReturnType="Next" 
                                   VerticalTextAlignment="Center"
                                   HorizontalTextAlignment="End"
                                   FontSize="30"
                                   Grid.Column="0"
                                   Text="{Binding TaxInput}">
                            <Entry.Behaviors>
                                <behaviors:CompletedEntry/>
                                <behaviors:FocusedEntry/>
                            </Entry.Behaviors>
                        </Entry>
                        <Label ClassId="second"
                                   Text="%"
                                   TextColor="WhiteSmoke"
                                   VerticalTextAlignment="Center" 
                                   HorizontalTextAlignment="Start"
                                   Grid.Column="1"
                                   FontSize="30"/>
                    </Grid>
                </Frame>
            </StackLayout>
        </StackLayout>
        <!--Overlay-->
        <!--<ContentView x:Name="overlay" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"  AbsoluteLayout.LayoutFlags="All" IsVisible="{Binding isLoading}">
            <ActivityIndicator  IsRunning="True" IsVisible="True" Color="White" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"/>
        </ContentView>-->
    </Grid>
</ContentPage>